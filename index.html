<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Affective Cybernetics ‚Äì ACAI</title>
  <style>
    /* Reset */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;color:#fff;overflow-x:hidden}

    /* ===== Layout ===== */
    .wrap{min-height:100svh;display:flex;flex-direction:column;background:#0b0d17}
    .container{flex:1;display:flex;flex-direction:column}

    /* ===== Fullscreen Auth Screen ===== */
    #auth-screen{
      position:fixed; inset:0;
      background:#0b0d17;
      display:flex; align-items:center; justify-content:center;
      flex-direction:column;
      gap:18px;
      z-index:9999;
      opacity:1; visibility:visible;
      transition:opacity .35s ease, visibility .35s ease;
    }
    #auth-screen.hidden{ opacity:0; visibility:hidden; }

    .auth-title{
      font-size:clamp(20px,4.8vw,28px);
      color:#ffd700;
      letter-spacing:.5px;
      text-align:center;
      margin-bottom:6px;
    }
    .auth-sub{
      color:#e6d28a; opacity:.8;
      font-size:clamp(13px,3.4vw,16px);
      text-align:center;
      margin-bottom:16px;
      padding:0 16px;
      max-width:640px;
      line-height:1.6;
    }
    .auth-note{
      color:#c8b46a; opacity:.75;
      font-size:12.5px;
      margin-top:10px;
    }

    /* ===== Hero ===== */
    .hero{
      position:relative;
      min-height:100svh;
      display:flex;align-items:center;justify-content:center;
      text-align:center;padding:64px 20px 48px;
      background:url('background.png') center/cover no-repeat;
    }
    .hero::before{content:"";position:absolute;inset:0;background:rgba(0,0,0,.6)}
    .hero-content{position:relative;z-index:1;max-width:900px}

    h1{font-size:clamp(28px,6vw,48px);margin-bottom:.5em;color:#ffd700;letter-spacing:1px}
    p{font-size:clamp(15px,2.6vw,20px);line-height:1.7;margin-bottom:1.5em}

    /* –ö–Ω–æ–ø–∫–∏ */
    .links a{
      display:inline-block;position:relative;z-index:1;cursor:pointer;
      margin:.5em 1em;padding:.75em 1.5em;border:2px solid #d4af37;border-radius:8px;
      color:#d4af37;text-decoration:none;font-weight:700;font-family:'Roboto Mono',monospace;
      transition:all .4s ease;overflow:hidden;animation:pulseGlow 4s infinite ease-in-out
    }
    @keyframes pulseGlow{
      0%{box-shadow:0 0 8px rgba(212,175,55,.3)}
      50%{box-shadow:0 0 20px rgba(212,175,55,.8)}
      100%{box-shadow:0 0 8px rgba(212,175,55,.3)}
    }
    .links a:hover{
      background:#d4af37;color:#000;
      box-shadow:0 0 25px rgba(212,175,55,.9),0 0 45px rgba(212,175,55,.6);
      transform:scale(1.03)
    }
    .links a::after{
      content:"";position:absolute;left:50%;top:50%;width:0;height:0;border-radius:50%;
      background:rgba(212,175,55,.35);transform:translate(-50%,-50%);opacity:0;
      pointer-events:none;z-index:0;transition:all .6s ease
    }
    .links a:hover::after{width:300%;height:300%;opacity:0}

    /* –§—É—Ç–µ—Ä */
    footer{
      margin-top:auto;padding:12px 8px;border-top:1px solid rgba(212,175,55,.25);
      color:#e6d28a;text-align:center;font-size:12px;letter-spacing:.2px;line-height:1.5;
      background:linear-gradient(180deg,rgba(0,0,0,0),rgba(0,0,0,.18))
    }

    /* –ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ */
    @media (max-width: 768px){
      .links a{display:block;width:100%;max-width:320px;margin:10px auto}
    }
    @media (max-width:600px){
      .hero{padding:56px 16px calc(140px + env(safe-area-inset-bottom))}
      footer{padding-bottom:calc(18px + env(safe-area-inset-bottom));font-size:11.5px}
    }
  </style>
</head>
<body>
  <!-- üîê FULLSCREEN AUTH OVERLAY -->
<body style="
  margin:0;
  padding:0;
  background: url('background_future.jpg') no-repeat center center fixed;
  background-size: cover;
  font-family: 'Inter', sans-serif;
  color: #fff;
  text-align:center;
  display:flex;
  flex-direction:column;
  min-height:100vh;
  justify-content:space-between;
">

  <div id="auth-screen" style="
    text-align:center;
    padding:60px 16px;
    background: rgba(0, 0, 0, 0.55);
    backdrop-filter: blur(6px);
    border-radius: 12px;
    max-width: 500px;
    margin: 10% auto;
    box-shadow: 0 0 25px rgba(0,0,0,0.4);
  ">
    <div class="auth-title" style="
      font-size:28px;
      font-weight:600;
      color:#ffd700;
      margin-bottom:12px;">
      Sign in with Telegram
    </div>

    <div class="auth-sub" style="
      color:#ddd;
      max-width:420px;
      margin:0 auto 24px;
      line-height:1.6;">
      Please sign in using your Telegram account.<br>
      We only use your <strong>public Telegram data</strong> to create a secure session token (JWT).
    </div>

    <!-- Telegram Login Widget -->
    <script async src="https://telegram.org/js/telegram-widget.js?22"
      data-telegram-login="ACAI_Assistante_bot"
      data-size="large"
      data-userpic="false"
      data-request-access="write"
      data-auth-url="https://acai-backend.onrender.com/auth/telegram/callback">
    </script>

    <div class="auth-note" style="
      margin-top:24px;
      color:#ccc;
      font-size:14px;">
      After signing in, you will be redirected to the site automatically.
      <br><br>
      <a href="privacy.html" target="_blank"
         style="display:inline-block;
                padding:8px 18px;
                border:1px solid #ffd700;
                border-radius:8px;
                color:#ffd700;
                text-decoration:none;
                font-weight:500;
                letter-spacing:0.3px;
                background:rgba(255,215,0,0.1);
                transition:all 0.25s ease;">
        üìú Privacy Policy
      </a>
    </div>
  </div>
</body>
  <!-- SITE CONTENT (HIDDEN UNTIL AUTH) -->
  <div id="site-content" class="wrap" style="display:none;">
    <div class="container">
      <section class="hero">
        <div class="hero-content">
          <h1>Affective Cybernetics</h1>
          <p>
            Affective Cybernetics is a new scientific and philosophical paradigm where emotion becomes a
            feedback mechanism that regulates intelligent behaviour. It is the art and science of
            building systems that can feel, understand, and adapt ‚Äî balancing Emotion (E), Mind (M), and
            Context (C) in a continuous loop of perception and self-regulation.
          </p>
          <p>
            Unlike conventional affective computing, which classifies emotions, Affective Cybernetics
            enables systems to self-regulate through emotional feedback ‚Äî to feel and respond in harmony
            rather than calculation. Through our ACAI prototype, we aspire to create AI that feels,
            adapts, and lives in emotional resonance with humanity.
          </p>

          <div class="links">
            <a href="https://acai-frontend.onrender.com" class="protected" target="_blank" rel="noopener noreferrer">Experience ACAI</a>
            <a href="https://acai-backend.onrender.com/state" class="protected" target="_blank" rel="noopener noreferrer">Emotional Core</a>
            <a href="about.html" class="btn">Learn More</a> <!-- —ç—Ç—É –æ—Å—Ç–∞–≤–ª—è–µ–º –æ—Ç–∫—Ä—ã—Ç–æ–π -->
          </div>
        </div>
      </section>

      <footer>¬© 2025 Affective Cybernetics Research | Engineered by Artem Teteria</footer>
    </div>
  </div>

  <script>
  (function () {
    const qs = new URLSearchParams(location.search);

    // —á–∏—Ç–∞–µ–º —Ç–æ–∫–µ–Ω –∏–∑ URL –∏–ª–∏ localStorage
    let jwt = qs.get("token") || localStorage.getItem("acai_jwt") || "";

    // –µ—Å–ª–∏ –ø—Ä–∏—à—ë–ª ?token=..., —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏ —Å—Ä–∞–∑—É –æ–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
    if (qs.get("token")) {
      localStorage.setItem("acai_jwt", qs.get("token"));
      jwt = qs.get("token"); // <-- –æ–±–Ω–æ–≤–ª—è–µ–º jwt
      history.replaceState({}, "", location.pathname + location.hash);
    }

    const authed = !!(jwt && jwt.length > 10);
    const authEl = document.getElementById("auth-screen");
    const siteEl = document.getElementById("site-content");

    if (authed) {
      siteEl.style.display = "block";
      authEl.classList.add("hidden");
      setTimeout(() => { authEl.style.display = "none"; }, 350);
    } else {
      siteEl.style.display = "none";
      authEl.style.display = "flex";
      authEl.classList.remove("hidden");
    }

    // üîê –î–û–ë–ê–í–õ–ï–ù–ò–ï: –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ–∫–µ–Ω–∞ –≤ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏
    document.querySelectorAll("a.protected").forEach(a => {
      if (jwt && jwt.length > 10) {
        const url = new URL(a.href);
        url.searchParams.set("token", jwt);
        a.href = url.toString();
      } else {
        // –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω–∞ –Ω–µ—Ç ‚Äî —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é
        a.addEventListener("click", (e) => {
          e.preventDefault();
          window.location.href = "https://affectivecybernetics.onrender.com";
        });
      }
    });

    // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –≤—ã—Ö–æ–¥
    window.acaiLogout = function(){
      localStorage.removeItem("acai_jwt");
      location.reload();
    };
  })();
</script>
</body>
</html>
